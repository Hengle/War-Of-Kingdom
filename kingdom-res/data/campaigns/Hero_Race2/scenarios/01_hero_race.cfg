# scenario是场景块标签。
[scenario]

	# 本场景标识。注意下二楼[campaign]标签中的first_scenario字段
	id=hero_race2
	# 本场景胜利结束后下一场景。群雄争霸只一个场景，结束就没了
	next_scenario=null
    
	# 本场景叫什么：群雄争霸
	name=_"race of hero2"
	# 本场景使用到的地图
	map_data="{campaigns/Hero_Race2/maps/sanguo}"
	# 本场景限定回合数。-1表示不限回合
	turns=-1
    
    maximal_defeated_activity = 0
    
	# 一天内分哪些时段。在不同时段不同兵种部队能力可能有不同表现。像守序单位在白天有25%加成
	# 第一时段：黎明
	{DAWN}
	# 第二时段：白天（早上）
	{MORNING}
	# 第三时段：白天（下午）
	{AFTERNOON}
	# 第四时段：黄昏
	{DUSK}
	# 第五时段：晚上（前半夜）
	{FIRST_WATCH}
	# 第六时段：晚上（后半夜）
	{SECOND_WATCH}
    
	# 游戏中使用到的背景音乐  
	[music]
    	name = legends_of_the_north.ogg
    [/music]
    {APPEND_MUSIC transience.ogg}
    {APPEND_MUSIC underground.ogg}
    {APPEND_MUSIC elvish-theme.ogg}
    {APPEND_MUSIC revelation.ogg}
  
	# 定义一个事件，触发时机：prestart，初始化场景时被执行
	[event]
		name=prestart
		
		# 定义本场景胜利条件和失败条件. (它们只是提示用，不会作为判断条件）
		[objectives]
			[objective]
				description= _"Defeat all sides"
				condition=win
			[/objective]
			[objective]
				description= _"No city you holded"
				condition=lose
			[/objective]
		[/objectives]
	[/event]

  
	# 接下开始定义势力。势力，就是类似魏、吴、蜀。  
	[side]
		# 势力编号。它必须从1始，逐1增
		side=1
		
		{PLAYER_IF 12}
			# “选择玩家”中选择了[player]...side=1[/player]后就会进入这里，一旦选择那它就是玩家
			# 是否使用战争黑幕。$指示这是一个全局变量，player.shroud不在if条件中，需要加$
			shroud=$player.shroud
			# 是否使用战争迷雾。
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			# 控制：玩家
			controller=human
		{PLAYER_ELSE}
			# “选择玩家”时玩家没有选择该势力，那就是作为ai势力
			# 控制：ai
			controller=ai
		{PLAYER_ENDIF_ELSE}
			
		# 势力领袖武将
		leader=12
		id=machao
		
		# 航海文明。不定义时默认是0，这里定义只是说了说明
		navigation=0
        
		# 弥补AI不足，让AI每回合有更多金和一开始就能招3级兵
		{PLAYER_IF 12}
			# 玩家选择了该势力，初始金100
			gold=100
			# 每回合基本收入0
			income=0
			feature=(horseman, 6, 36)
		{PLAYER_ELSE}
			# AI势力，初始金200
			gold=200
			# 每回合基本收入150
			income=150
			feature=(horseman, 4, 36)
		{PLAYER_ENDIF_ELSE}
		
		build = wall, market, tower
		
		# 在(30,26)坐标处放置一个城市, 该城市属于城市编号1,side=1,城市序号125（它和武将被统一编号）
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 1 1 city1 30 26 125}
		[+artifical]
			mayor = 201
			# 城市一开始“空闲武将”
			service_heros=2,48,113,146,159,199,200,201
			# 城市一开始“在野武将”
		  wander_heros=170,293
			# 属于该城市的经济区
			economy_area=(22,26)
			# 该城市辖区（左上角x坐标，左上角y坐标，宽度，高度）
			district=(28,24,5,5)
			[/artifical]

		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 2 1 city1 6 7 217}
		[+artifical]
		  wander_heros=352
			# 属于该城市的经济区
			economy_area=(16,8)
			# 该城市辖区（左上角x坐标，左上角y坐标，宽度，高度）
			district=(5,6,5,5)
		[/artifical]
		# 城市编号1在(23,26）坐标处放置一只部队，兵种commander5，部队主将：12
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 1 (commander5) 23 26 (12)}
	[/side]
    
	#{STARTING_VILLAGES 1 7}
    
	[side]
		side=2
		
		{PLAYER_IF 136}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
			feature=(academy, 6, 53)
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=150
			feature=(academy, 4, 53)
		{PLAYER_ENDIF_ELSE}
    
    	build = wall, market, tower
    	
		leader=136
		id=yuanshao
		        
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 3 2 city1 98 14 126}
		[+artifical]
			mayor = 144
			service_heros=44,87,119,141,142,144,155,202,204,322
			wander_heros=185,316,317,318,319
			economy_area=(95,10)
			district=(96,12,5,5)
		[/artifical]

		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 4 2 city1 67 14 221}
		[+artifical]
		  mayor = 277
			service_heros=78,161,163,277,276,349
			wander_heros=320,323
			economy_area=(73,14),(75,2)
			district=(65,12,5,5)
		[/artifical]		
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 3 (commander5) 98 17 136}
	[/side]
   
	#{STARTING_VILLAGES 2 4}
    
	[side]
		side=3
		
		{PLAYER_IF 3}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
			feature=(footman, 6, 44)
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=250
			feature=(footman, 4, 44)
		{PLAYER_ENDIF_ELSE}

		build = wall, market, tower
		
		leader=3
		id=caocao
		
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_HIGH 5 3 city1 76 48 127}
		[+artifical]
			mayor=151
			service_heros=13,15,37,39,65,67,95,93,96,118,151,122
			wander_heros=19,68,79,91,92,8,94,97
			economy_area=(70,54)
			district=(74,46,5,5)
		[/artifical]
				
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 17 3 city1 115 34 128}
		[+artifical]
			mayor= 114
			service_heros=210,83,112,114,16,35,36
			wander_heros=109,99,101,102,107,108,88,86,84,324
			economy_area=(120,35)
			district=(113,32,5,5)
		[/artifical]
		
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_HIGH 19 3 city2 69 36 133}
		[+artifical]
			mayor=7
			service_heros=7,254,45,46,47
			wander_heros=69,70,71,72,73,74,75,76,63,64,62,66
			economy_area=(74,31),(66,40)
			district=(67,34,5,5)
		[/artifical]
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 5 (commander5) 78 50 3}
	[/side]

	#{STARTING_VILLAGES 3 5}
    
	[side]
		side=4
		
		navigation=10000
		{PLAYER_IF 140}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=150
		{PLAYER_ENDIF_ELSE}
		
		build = wall, market, tower
		
		leader=140
		id=yuanshu
        
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 7 4 city1 124 68 129}
		[+artifical]
			mayor=327
			service_heros=0,143,153,158,166,197,198,34,111,17,18
			wander_heros=305,290,289
			economy_area=(129,69)
			district=(122,66,5,5)
		[/artifical]
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 7 (commander5) 128 68 140}
	[/side]
    
	#{STARTING_VILLAGES 4 4}
    
	[side]
		side=5
		
		leader=139
		id=sunjian

		navigation=10000
		{PLAYER_IF 139}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
			feature=(footman, 6, 25)
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=200
			feature=(footman, 4, 25)
		{PLAYER_ENDIF_ELSE}

		build = wall, market, tower
		
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 9 5 city1 123 88 130}
		[+artifical]
			mayor = 6
			service_heros=6,14,21,22,23,24,25,26,27,28,29,30,41,115,116,156,187,188,193,268,282,299,300,301,183
			wander_heros=173,182,184,190,192,189,191,100,20,302,303,304,344
			economy_area=(115,88)
			district=(121,86,5,5)
		[/artifical]
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 9 (commander5) 115 87 139}
	[/side]
    
	#{STARTING_VILLAGES 5 5}
    
	[side]
		side=6

		leader=138
		id=liubiao

		navigation=10000
		{PLAYER_IF 138}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=150
		{PLAYER_ENDIF_ELSE}
		
		build = wall, market, tower
		
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 10 6 city1 59 69 50}
		[+artifical]
			mayor = 148
			service_heros=1,33,145,148,149,160,171,172,306,307
			wander_heros=43,85,177,178,179,196
			economy_area=(55,71)
			district=(57,67,5,5)
		[/artifical]

		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 11 6 city1 66 86 51}
		[+artifical]
			mayor = 110
			service_heros=61,279,110
			wander_heros=283,284,330,314
			economy_area=(58,83)
			district=(64,84,5,5)
		[/artifical]

		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 8 6 city1 94 68 53}
		[+artifical]
			mayor = 40
			service_heros=40
			wander_heros=343,345,346,347
			economy_area=(96,65)
			district=(92,66,5,5)
		[/artifical]
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 10 (commander5) 55 72 138}
	[/side]
    
	#{STARTING_VILLAGES 6 6}
    
	[side]
		side=7
		
		leader=137
		id=menghuo

		{PLAYER_IF 137}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=100
		{PLAYER_ENDIF_ELSE}
		
		build = wall, market, tower
		
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 12 7 city1 9 96 131}
		[+artifical]
			mayor = 332
			service_heros=154,167,176,194,195,203,207,331,332
			wander_heros=333,350
			economy_area=(8,87)
			district=(7,94,5,5)
		[/artifical]
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 12 (commander5) 10 90 137}
	[/side]
    
	#{STARTING_VILLAGES 7 4}
    
	[side]
		side=8

		leader=4
		id=liubei

    	navigation=5000
		{PLAYER_IF 4}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
			feature=(footman, 6, 45)
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=150
			feature=(footman, 4, 45),(academy, 4, 47)
		{PLAYER_ENDIF_ELSE}        
		
		build = wall, market, tower
		
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 13 8 city1 50 56 54}
		[+artifical]
			service_heros=5,10,11,31,32,58,59,60,80,81,82,106,162,209,213,253,280,281,278,348,42
			wander_heros=89,90,150,180,211,168,212,261,313,315
			economy_area=(54,57)
			district=(48,54,5,5)
		[/artifical]	
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 13 (commander5) 54 58 4}
	[/side]

	[side]
		side=9

		leader=135
		id=dongzhuo

		{PLAYER_IF 135}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
			feature=(horseman, 6, 41)
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=150
			feature=(horseman, 4, 41)
		{PLAYER_ENDIF_ELSE}        
		
		build = wall, market, tower
		
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_HIGH 14 9 city2 48 33 218}
		[+artifical]
			mayor=208
			service_heros=98,103,121,147,152,157,181,206,208,266,328
			wander_heros=165,175,329,296,297,294
			economy_area=(57,33),(52,40)
			district=(46,32,5,5)
		[/artifical]
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 15 9 city1 2 29 219}
		[+artifical]
			economy_area=(7,33)
			district=(1,28,5,5)
		[/artifical]
		
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 14 (commander5) 56 32 135}
	[/side]

	[side]
		# 演艺圈势力，打这势力中部队很涨经验
		side=10
		controller=ai
		# 势力名称	
		user_team_name=_"actor"

		leader=123
		id=actor
		name= _"actor"
        
        not_recruit=footman1,bowman1,catapult1,commander1,pikeman1,mage1
		
		gold=0
		income=0
	[/side]
    
	[side]
		side=11

		leader=235
		id=gongsunzan

		{PLAYER_IF 235}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
			feature=(horseman, 4, 36)
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=150
			feature=(horseman, 6, 36)
		{PLAYER_ENDIF_ELSE}
        
        build = wall, market, tower
        
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 16 11 city1 122 3 222}
		[+artifical]
			service_heros=231,232,233,234,236,237,238
			wander_heros=321
			economy_area=(121,12)
			district=(120,2,5,5)
		[/artifical]

		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 16 (commander5) 121 13 235}
	[/side]
    
	#{STARTING_VILLAGES 11 6}
	
	[side]
		side=12

		leader=104
		id=lubu

		{PLAYER_IF 104}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
			feature=(horseman, 6, 57)
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=150
			feature=(horseman, 4, 57)
		{PLAYER_ENDIF_ELSE}
        
        build = wall, market, tower
        
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 18 12 city1 117 51 223}
		[+artifical]
			mayor=262
			service_heros=105,120,164,169,205,9,262,263,264,265,269,295
			wander_heros=325,326,327
			economy_area=(112,47)
			district=(115,49,5,5)
		[/artifical]
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 18 (commander5) 115 47 104}
	[/side]
    
	#{STARTING_VILLAGES 12 6}
	
	[side]
		side=13

		leader=239
		id=liuzhang

		{PLAYER_IF 239}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=150
		{PLAYER_ENDIF_ELSE}
        
        build = wall, market, tower
        
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_HIGH 20 13 city1 12 71 132}
		[+artifical]
			mayor=243
			service_heros=241,242,243,244,245,246,247,248,267
			wander_heros=351,308,310,311,312,77
			economy_area=(18,70)
			district=(10,69,5,5)
		[/artifical]
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 21 13 city1 44 78 220}
		[+artifical]
			mayor=240
			service_heros=249,250,251,252,240
			wander_heros=353,309
			economy_area=(49,80)
			district=(42,76,5,5)
		[/artifical]
		
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 20 (commander5) 18 71 239}
	[/side]
    
	#{STARTING_VILLAGES 13 6}
	
	[side]
		side=14

		leader=117
		id=zhanglu

		{PLAYER_IF 117}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=120
		{PLAYER_ENDIF_ELSE}
        
        build = wall, market, tower
        
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 22 14 city1 5 54 134}
		[+artifical]
			service_heros=255,256,257,258,259,260
			economy_area=(12,51)
			district=(3,52,5,5)
		[/artifical]
				
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 22 (commander5) 11 51 117}
	[/side]
	
	[side]
		side=15

		leader=285
		id=zhangxiu

		{PLAYER_IF 285}
			shroud=$player.shroud
			fog=$player.fog
			candidate_cards=$player.candidate_cards
			holded_cards=$player.holded_cards
			controller=human
			gold=100
			income=0
		{PLAYER_ELSE}
			controller=ai
			gold=200
			income=120
		{PLAYER_ENDIF_ELSE}
        
        build = wall, market, tower
        
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 6 16 city1 30 47 55}
		[+artifical]
			service_heros=286,174,186
			wander_heros=,287,288,291,292,342
			economy_area=(23,50)
			district=(28,45,5,5)
		[/artifical]
				
		{ANONYMITY_LOYAL_MERITORIOUS_UNIT 6 (commander5) 24 49 285}
	[/side]
	
	[side]
		side=16
		controller=null
        
		{ANONYMITY_LOYAL_MERITORIOUS_CITY_MID 23 15 city1 95 94 215}
		[+artifical]
			wander_heros=
			economy_area=(91,91)
		[/artifical]
	[/side]
	
 	[event]
		name=start

		[unit]
			# 溜二拐上场
			type=stage player
			# 部队武将：38
			heros_army=38
			# 属于势力10：演艺圈
			side=10
			# 仔细看可以发现，一直都没有定义cityno=0的城市，
			# 而这里置cityno等于0，是故意要让指向一个不存在城市，也就是说这支部队是流浪部队
			cityno=0
			#x,y=34, 28
			# 溜二拐初始出现在座标(48, 5)格子
			#x,y=48, 5
			x,y=44, 6
		[/unit]
		[unit]
			type=famous director
			heros_army=123,124
			side=10
			cityno=0
			#x,y=34, 27
			x,y=48, 4
		[/unit]
		
		[unit]
			type = stage player
			heros_army = 270
			side = 10
			cityno = 0
			x, y = 118, 85
		[/unit]
	[/event]

	# 挂接新回合时事件。每次新回合，要执行在野武将自荐
	[event]
		name=new turn
		first_time_only=no
		
		[recommend]
		[/recommend]
		[ai]
			selfish=no
		[/ai]
	[/event]

	# 挂接外交事件，可以同盟
	[event]
		name=diplomatism
		first_time_only=no
		[ally]
		[/ally]
	[/event]

	# 挂接溜二拐被打得退场时事件
	[event]
		name=last breath
		# [filter]是个筛选器
		[filter]
			# liuxiang
			# 快退场角色必须是溜二拐为主将部队，否则不执行以下动作
			master_hero=38
		[/filter]
		# 这个事件不仅执行一次
		first_time_only=no
		
		[if]
			[variable]
				# 85%几率执行then块中操作, 15%几率执行[else]块中操作
				name=random
				less_than=85
			[/variable]
			[then]
				# 定义一个变量。初写mod时定义这变量目的为了简单，使用下来这种方式不行。但先暂时搁着，我是要实现这种方式的
				# 为实现同样目的，现在在用的是后面那个变量：lxword
				[set_variable]
					name=lxidx
					rand=1..6
				[/set_variable]
		
				# 定义一个变量
				[set_variable]
					# 变量名lxword，值是后面那9个字符串中一个，随机取值
					name=lxword
					rand=_"liuxiang word: 1", _"liuxiang word: 2", _"liuxiang word: 3", _"liuxiang word: 4", _"liuxiang word: 5", _"liuxiang word: 6", _"liuxiang word: 7", _"liuxiang word: 8", _"liuxiang word: 9"
				[/set_variable]
        
				# 定义一个变量
				[set_variable]
					# 变量名coor_x，值是18..39中一个数字，随机取值
					name=coor_x
					rand=18..39
				[/set_variable]
        
				# 定义一个变量
				[set_variable]
					# 变量名coor_y，值是后面那8..29中一个数字，随机取值
					name=coor_y
					rand=8..29
				[/set_variable]
#ifdef NORMAL
				# 溜二拐快退场时会干什么呢？
				# 1. 说出一句至理名言。名言内容就是lxword中内容，也就是或_"liuxiang word: 1", 或_"liuxiang word: 2"，类推
				[message]
					speaker=38
					#message= _ "liuxiang word: $lxidx"
					pop_in_fog=no
					message= $lxword
				[/message]
#endif
				# 2. 告知我退场了，自我爆炸
				[kill]
					master_hero=38
					#animate=yes
				[/kill]
        
				# 3. 他改为出现在coor_x和coor_y指定格子处
				[unit]
					type=stage player
					heros_army=38
					side=10
					cityno=0
					attacks_left = 0
					x,y=$coor_x, $coor_y
				[/unit]
			[/then]
			[else]
				# 15%几率是加入高稀屎部队
#ifdef NORMAL
				[message]
					speaker=123
					pop_in_fog=no
					message= _"You have perfect potential, Come on!"
				[/message]
				[message]
					speaker=38
					pop_in_fog=no
					message= _"I'm looking forward to it always"
				[/message]
				[message]
					speaker=123
					pop_in_fog=no
					message= _"Bitch work together!"
				[/message]
#endif				
				[kill]
					master_hero=38
				[/kill]
				# 加入高稀屎部队
				[join]
					master_hero=123
					join_hero=38
				[/join]
			[/else]
		[/if]
	[/event]

	# 挂接高稀屎被打得退场时事件
	[event]
		name=last breath
		[filter]
			# gxx
			must_heros=123
		[/filter]
		first_time_only=no
        
		[set_variable]
			name=gxxidx
			rand=1..6
		[/set_variable]
		
		[set_variable]
			name=gxxword
			rand=_"gxx word: 1", _"gxx word: 2", _"gxx word: 3", _"gxx word: 4", _"gxx word: 5", _"gxx word: 6", _"gxx word: 7", _"gxx word: 8", _"gxx word: 9"
		[/set_variable]

		[if]
			[variable]
				# 20%几率“信春哥，原地复活”
				# 80%几率在另一个地方出现
				name=random
				less_than=20
			[/variable]
			[then]
				[set_variable]
					name=coor_x
					value=$unit.x
				[/set_variable]
				[set_variable]
					name=coor_y
					value=$unit.y
				[/set_variable]
#ifdef NORMAL
				[message]
					speaker=123
					pop_in_fog=no
					message= _"Believe chun! Resurrection Man-state in-situ!"
				[/message]
#endif
			[/then]
			[else]
				[set_variable]
					name=coor_x
					rand=18..39
				[/set_variable]
				[set_variable]
					name=coor_y
					rand=8..29
				[/set_variable]
			[/else]
		[/if]		
        
		[kill]
			master_hero=123
			#animate=yes
		[/kill]
        
		# 这个部队中可能有溜二拐，如果是，复活时要出来两只部队
		[unit]
			type=famous director
			heros_army=123,124
			side=10
			cityno=0
			attacks_left = 0
			x,y=$coor_x, $coor_y
		[/unit]
		[if]
			[have_unit]
				must_heros=38
			[/have_unit]
			[then]
			[/then]
			[else]
				[unit]
					type=stage player
					heros_army=38
					side=10
					cityno=0
					attacks_left = 0
					x,y=$coor_x, $coor_y
				[/unit]
			[/else]
		[/if]
	[/event]
	
	# 挂接韩痞子被打得退场时事件
	[event]
		name=last breath
		[filter]
			must_heros=270
		[/filter]
		first_time_only=no
		
		[set_variable]
			# 变量名coor_x，值是85..148中一个数字，随机取值
			name=coor_x
			rand=85..148
		[/set_variable]
        
		[set_variable]
			# 变量名coor_y，值是后面那30..99中一个数字，随机取值
			name=coor_y
			rand=30..99
		[/set_variable]
				
		[kill]
			master_hero=270
			# animate=yes
		[/kill]
        
		[unit]
			type=stage player
			heros_army=270
			side=10
			cityno=0
			attacks_left = 0
			x,y=$coor_x, $coor_y
		[/unit]

	[/event]	

[/scenario]

