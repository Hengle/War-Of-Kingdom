#textdomain wesnoth-lib
###
### Definition of the main screen for Wesnoth.
###

#define V_SPACE
(if(default_gui, 4, 6))
#enddef

#define _GUI_H_SPACER WIDTH GROW_FACTOR
	[column]

		grow_factor = "{GROW_FACTOR}"

		[spacer]
			definition = "default"
			width = "{WIDTH}"
		[/spacer]

	[/column]
#enddef

#define _GUI_V_SPACER HEIGHT
	[column]

		[spacer]
			definition = "default"
			height = {HEIGHT}
		[/spacer]

	[/column]
#enddef

#define _GUI_SHEET_HEADER
	[row]
		[column]
			horizontal_alignment = "left"
			vertical_grow = "true"
			[grid]
				[row]
					[column]
						[toggle_button]
							id = "message"
							definition = "sheet"

							linked_group = "sheet_header"
							label = _"Message"
						[/toggle_button]

					[/column]

					[column]
						[toggle_button]
							id = "siege_record"
							definition = "sheet"
							
							linked_group = "sheet_header"
							label = _"Siege record"
						[/toggle_button]
					[/column]
					
					[column]
						[toggle_button]
							id = "employ_hero"
							definition = "sheet"
							
							linked_group = "sheet_header"
							label = _"Employ hero"
						[/toggle_button]
					[/column]
					
					[column]
						[toggle_button]
							id = "rank_score"
							definition = "sheet"
							
							linked_group = "sheet_header"
							label = _"Rank score"
						[/toggle_button]
					[/column]
					
				[/row]
			[/grid]
		[/column]			
	[/row]
#enddef

#define _GUI_TABLE_HEADER_MESSAGE
	[row]
		[column]
			horizontal_grow = "true"
			[label]
				id = "flag"
				definition = "table"
				linked_group = "flag"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "sender"
				definition = "table"
				label = _ "Sender"
				linked_group = "sender"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "receiver"
				definition = "table"
				label = _ "Receiver"
				linked_group = "receiver"
			[/label]
		[/column]
			
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "time"
				definition = "table"
				label = _ "Time"
				linked_group = "time"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "content"
				definition = "table"
				label = _ "Content"
				linked_group = "content"
			[/label]
		[/column]
	[/row]
#enddef

#define _GUI_TABLE_ROW_MESSAGE
	[row]
		[column]
			horizontal_grow = "true"
			[label]
				id = "flag"
				definition = "table"
				linked_group = "flag"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "sender"
				definition = "table"
				linked_group = "sender"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "receiver"
				definition = "table"
				linked_group = "receiver"
			[/label]
		[/column]
			
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "time"
				definition = "table"
				linked_group = "time"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "content"
				definition = "table"
				linked_group = "content"
			[/label]
		[/column]
	[/row]
#enddef

#define _GUI_TABLE_HEADER_SIEGE
	[row]
		[column]
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Create time"
				linked_group = "createtime"
			[/label]
		[/column]
			
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "side^Attacker"
				linked_group = "attacker"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "side^Defender"
				linked_group = "defender"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Attacker's reinforce"
				linked_group = "atk_reinforce"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Defender's reinforce"
				linked_group = "def_reinforce"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Result"
				linked_group = "result"
			[/label]
		[/column]
		
	[/row]
#enddef

#define _GUI_TABLE_ROW_SIEGE
	[row]
		[column]
			horizontal_grow = "true"
			[label]
				id = "createtime"
				definition = "table"
				linked_group = "createtime"
			[/label]
		[/column]
			
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "attacker"
				definition = "table"
				linked_group = "attacker"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "defender"
				definition = "table"
				linked_group = "defender"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "atk_reinforce"
				definition = "table"
				linked_group = "atk_reinforce"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "def_reinforce"
				definition = "table"
				linked_group = "def_reinforce"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "result"
				definition = "table"
				linked_group = "result"
			[/label]
		[/column]
		
	[/row]
#enddef

#define _GUI_TABLE_HEADER_EMPLOYEE
	[row]
		[column]
			[label]
				definition = "default"
				linked_group = "troop_icon"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "default"
				linked_group = "name"
			[/label]
		[/column]
			
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Level"
				linked_group = "level"
			[/label]
		[/column]
			
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Cost"
				linked_group = "cost"
			[/label]
		[/column]
#textdomain wesnoth-hero		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "leadership"
				linked_group = "leadership"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "charm"
				linked_group = "charm"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "feature"
				linked_group = "feature"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "tactic"
				linked_group = "tactic"
			[/label]
		[/column]
#textdomain wesnoth-lib
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Ownership"
				linked_group = "ownership"
			[/label]
		[/column]
		
		[column]
			horizontal_grow = "true"
			[label]
				definition = "table"
				linked_group = "browse"
			[/label]
		[/column]
	[/row]
#enddef										
										
#define _GUI_TABLE_ROW_EMPLOYEE
	[row]
		[column]
			[stacked_widget]
				definition = "default"
				[stack]
					[layer]
						[row]
							[column]
								horizontal_alignment = "left"
								vertical_alignment = "top"
								
								[drawing]
									id = "human"
									definition = "default"
							
									width = "(if(default_gui, 16, 12))"
									height = "(if(default_gui, 16, 12))"
									linked_group = "troop_icon"

									[draw]
										[image]
											name="(if(default_gui, 'misc/human.png~SCALE(16, 16)', 'misc/human.png~SCALE(12, 12)'))"
										[/image]
									[/draw]
								[/drawing]
							[/column]
						[/row]
					[/layer]
							
					[layer]
						[row]
							[column]
								[drawing]
									id = "icon"
									definition = "default"
							
									width = "(if(default_gui, 48, if(vga, 48, 40)))"
									height = "(if(default_gui, 60, if(vga, 60, 50)))"
									linked_group = "troop_icon"

									[draw]
										[image]
											name="(if(default_gui, text + '~SCALE(48, 60)', if(vga, text + '~SCALE(48, 60)', text + '~SCALE(40, 50)')))"
										[/image]
									[/draw]
								[/drawing]
							[/column]
						[/row]
					[/layer]
				[/stack]
			[/stacked_widget]					
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"
			[label]
				id = "name"
				definition = "table"
				linked_group = "name"
			[/label]
		[/column]

		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"
			[label]
				id = "level"
				definition = "table"
				linked_group = "level"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"
			[label]
				id = "cost"
				definition = "table"
				linked_group = "cost"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"
			[label]
				id = "leadership"
				definition = "table"
				linked_group = "leadership"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"
			[label]
				id = "charm"
				definition = "table"
				linked_group = "charm"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"
			[label]
				id = "feature"
				definition = "table"
				linked_group = "feature"
			[/label]
		[/column]
					
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"
			[label]
				id = "tactic"
				definition = "table"
				linked_group = "tactic"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"
			[label]
				id = "ownership"
				definition = "table"
				linked_group = "ownership"
			[/label]
		[/column]
		
		[column]
			horizontal_grow = "true"
			[button]
				id = "browse"
				definition = "default"
				linked_group = "browse"
			[/button]
		[/column]			
	[/row]				
#enddef

#define _GUI_TABLE_HEADER_SCORE
	[row]
		[column]
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Username"
				linked_group = "username"
			[/label]
		[/column]
			
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Noble"
				linked_group = "noble"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "Hero"
				linked_group = "hero"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "kingdom^Coin"
				linked_group = "coin"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				definition = "table"
				label = _ "kingdom^Score"
				linked_group = "score"
			[/label]
		[/column]
		
		[column]
			horizontal_grow = "true"
			[label]
				definition = "table"
				linked_group = "browse"
			[/label]
		[/column]
	[/row]
#enddef

#define _GUI_TABLE_ROW_SCORE
	[row]
		[column]
			horizontal_grow = "true"
			[label]
				id = "username"
				definition = "table"
				linked_group = "username"
			[/label]
		[/column]
			
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "noble"
				definition = "table"
				linked_group = "noble"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "hero"
				definition = "table"
				linked_group = "hero"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "coin"
				definition = "table"
				linked_group = "coin"
			[/label]
		[/column]
		
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			[label]
				id = "score"
				definition = "table"
				linked_group = "score"
			[/label]
		[/column]
		
		[column]
			horizontal_grow = "true"
			[button]
				id = "browse"
				definition = "default"
				linked_group = "browse"
			[/button]
		[/column]
	[/row]
#enddef

#define _GUI_PAGE_MESSAGE
	[row]
		[column]
			grow_factor = 1
			horizontal_grow = "true"
			vertical_grow = "true"

			[grid]
				id = "table_block" # remark
				[row]
					grow_factor = 1
					[column]
						border = "bottom"
						border_size = 5
						horizontal_grow = "true"
						vertical_grow = "true"

						[listbox]
							id = "default"
							definition = "default"

							width = "(if(screen_width < 800, ((screen_width * 65) / 100), 520))"
							height = "(if(screen_height < 600, ((screen_height * 70) / 100), 420))"
								
							[header]
								{_GUI_TABLE_HEADER_MESSAGE}
							[/header]
		
							[list_definition]
								[row]
									[column]
										horizontal_grow = "true"
										[toggle_panel]
											id = "_toggle"
											definition = "default"

											[grid]
												id = "table_body" # remark
												{_GUI_TABLE_ROW_MESSAGE}
											[/grid]

										[/toggle_panel]

									[/column]

								[/row]

							[/list_definition]
						
						[/listbox]

					[/column]

				[/row]
				
				[row]
					[column]
						horizontal_alignment = "left"
						[button]
							id = "send"
							definition = "default"
							
							label = _"Send"
						[/button]
					[/column]
				[/row]	

			[/grid]

		[/column]
		
		[column]
			horizontal_grow = "true"
			vertical_grow = "true"
			[panel]
				definition = "portrait"
				[grid]
					id = "detail_grid" # remark
					[row]
						[column]
							horizontal_grow = "true"
							vertical_grow = "true"
							[scroll_label]
								id = "detail"
								definition = "default"
								
								width = "(if(screen_width < 800, ((screen_width * 30) / 100), 240))"
								height = "(if(screen_height < 600, ((screen_height * 70) / 100), 420))"
								
							[/scroll_label]
						[/column]
					[/row]
				[/grid]
			[/panel]	
		[/column]

	[/row]
#enddef

#define _GUI_PAGE_SIEGE_RECORD
	[row]
		[column]
			horizontal_grow = "true"
			vertical_grow = "true"

			[grid]
				[row]
					[column]
						border = "bottom"
						border_size = 5
						horizontal_grow = "true"
						vertical_grow = "true"

						[listbox]
							id = "record_table"
							definition = "default"

							[header]
								{_GUI_TABLE_HEADER_SIEGE}
							[/header]
		
							[list_definition]
								[row]
									[column]
										horizontal_grow = "true"
										[toggle_panel]
											id = "_toggle"
											definition = "default"

											[grid]
												{_GUI_TABLE_ROW_SIEGE}
											[/grid]

										[/toggle_panel]

									[/column]

								[/row]

							[/list_definition]
						
						[/listbox]

					[/column]

				[/row]

			[/grid]

		[/column]

	[/row]
#enddef

#define _GUI_PAGE_EMPLOYEE
	[row]
		[column]
			horizontal_grow = "true"
			vertical_grow = "true"

			[grid]
				[row]
					[column]
						border = "bottom"
						border_size = 5
						horizontal_grow = "true"
						vertical_grow = "true"

						[listbox]
							id = "default"
							definition = "default"

							[header]
								{_GUI_TABLE_HEADER_EMPLOYEE}
							[/header]
		
							[list_definition]
								[row]
									[column]
										horizontal_grow = "true"
										[toggle_panel]
											id = "_toggle"
											definition = "default"

											[grid]
												{_GUI_TABLE_ROW_EMPLOYEE}
											[/grid]

										[/toggle_panel]

									[/column]

								[/row]

							[/list_definition]
						
						[/listbox]

					[/column]

				[/row]

			[/grid]

		[/column]

	[/row]
	
	[row]
		{_GUI_V_SPACER 1}
	[/row]
#enddef

#define _GUI_PAGE_RANK_SCORE
	[row]
		[column]
			horizontal_grow = "true"
			vertical_grow = "true"

			[grid]
				[row]
					[column]
						border = "bottom"
						border_size = 5
						horizontal_grow = "true"
						vertical_grow = "true"

						[listbox]
							id = "score_table"
							definition = "default"

							[header]
								{_GUI_TABLE_HEADER_SCORE}
							[/header]
		
							[list_definition]
								[row]
									[column]
										horizontal_grow = "true"
										[toggle_panel]
											id = "_toggle"
											definition = "default"

											[grid]
												{_GUI_TABLE_ROW_SCORE}
											[/grid]

										[/toggle_panel]

									[/column]

								[/row]

							[/list_definition]
						
						[/listbox]

					[/column]

				[/row]

			[/grid]

		[/column]

	[/row]
	
	[row]
		{_GUI_V_SPACER 1}
	[/row]
#enddef

#define _GUI_PANEL
	[row]
		[column]
			horizontal_grow = "true"
			vertical_grow = "true"
			
			[scrollbar_panel]
				id = "page"
				[definition]
					[row]
						[column]
							horizontal_grow = "true"
							vertical_grow = "true"
							[grid]
								id = "_grid"
								[row]
								[/row]
							[/grid]
						[/column]
					[/row]
				[/definition]
			[/scrollbar_panel]
		[/column]
	[/row]	
#enddef

[window]
	id = "user_message"
	description = "User message dialog."

	[resolution]
		definition = "without_scrollbar"

		automatic_placement = "false"
		x = "((screen_width - width) / 2)"
		y = "((screen_height - height) / 2)"
		width = "(if(screen_width < 800, screen_width, 800))"
		height = "(if(screen_height < 600, screen_height, 600))"

		[alternate]
			[item]
				[linked_group]
					id = "flag"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "sender"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "receiver"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "time"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "content"
					fixed_width = "true"
				[/linked_group]
				
				[grid]
					{_GUI_PAGE_MESSAGE}
				[/grid]
			[/item]
			
			[item]
				[linked_group]
					id = "createtime"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "attacker"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "defender"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "atk_reinforce"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "def_reinforce"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "result"
					fixed_width = "true"
				[/linked_group]
				
				[grid]
					{_GUI_PAGE_SIEGE_RECORD}
				[/grid]
			[/item]
			
			[item]
				[linked_group]
					id = "troop_icon"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "name"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "level"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "cost"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "leadership"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "charm"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "feature"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "tactic"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "ownership"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "browse"
					fixed_width = "true"
				[/linked_group]
				
				[grid]
					{_GUI_PAGE_EMPLOYEE}
				[/grid]
			[/item]
			
			[item]
				[linked_group]
					id = "username"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "noble"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "hero"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "score"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "coin"
					fixed_width = "true"
				[/linked_group]
				
				[linked_group]
					id = "browse"
					fixed_width = "true"
				[/linked_group]
				
				[grid]
					{_GUI_PAGE_RANK_SCORE}
				[/grid]
			[/item]
		[/alternate]


		[linked_group]
			id = "sheet_header"
			fixed_width = "true"
		[/linked_group]
		
		[tooltip]
			id = "tooltip_large"
		[/tooltip]

		[helptip]
			id = "tooltip_large"
		[/helptip]

		[grid]

			[row]
				{_GUI_V_SPACER 2}
			[/row]
			
			{_GUI_SHEET_HEADER}

			[row]
				grow_factor = 1

				[column]

					horizontal_grow = "true"
					vertical_grow = "true"

					[grid]
						{_GUI_PANEL}
					[/grid]

				[/column]

			[/row]
							
			[row]
				[column]
					grow_factor = 1
					horizontal_grow = "true"
					border = "top,bottom"
					border_size = 4
											
					[image]
						definition = "default"
						label = "misc/split-line.png"
					[/image]
				[/column]
			[/row]

			[row]
				[column]
					horizontal_grow = "true"
					vertical_grow = "true"
								
					[grid]
						[row]
							{_GUI_H_SPACER 0 1}
							
							[column]
								border = "left, right"
								border_size = 5
								horizontal_alignment = "right"

								[button]
									id = "ok"
									definition = "default"

									label = _ "Close"
								[/button]
							[/column]
																			
						[/row]
					[/grid]
				[/column]
			[/row]
			
		[/grid]

	[/resolution]

[/window]

#undef _GUI_H_SPACER
#undef _GUI_V_SPACER
